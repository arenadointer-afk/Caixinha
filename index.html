<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>FinanÃ§as & Agenda Pro</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <link rel="stylesheet" href="styles.css">
  <meta name="theme-color" content="#4b0082">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
</head>
<body>

<div id="lock" class="lock">
  <h2 id="tituloLock">ğŸ” Acesso Seguro</h2>
  <p id="msgLock" style="margin-bottom:15px; opacity:0.8">Digite sua senha</p>
  <input type="number" id="pinInput" placeholder="Senha (4 dÃ­gitos)" pattern="\d*">
  <button onclick="verificarPin()" id="btnLock">Entrar</button>
  <p id="erroPin" style="color:#ff4444; display:none; margin-top:10px">Senha incorreta!</p>
</div>

<div id="mainContainer" style="display:none">

    <div id="tabCaixinhas" class="tab-content active">
        <div class="topo">
            <div class="perfil">
                <img id="fotoPerfil" src="https://via.placeholder.com/50" alt="Perfil">
                <input type="file" id="uploadFoto" accept="image/*" hidden>
                <div>
                    <h3 id="saudacao">OlÃ¡, Economista ğŸ‘‹</h3>
                    <div class="global-info">ğŸ’° Total Guardado: <span id="totalGlobal">R$ 0,00</span></div>
                </div>
            </div>
            <button onclick="logout()" class="btn-logout">Sair</button>
        </div>

        <div class="nova nao-imprimir">
            <input id="nome" placeholder="Nome do objetivo (ex: Viagem)">
            <input id="valor" type="number" placeholder="Valor total (ex: 1000)">
            <button onclick="criarCaixa()">â• Criar Caixinha</button>
        </div>

        <div id="lista" class="lista"></div>
    </div>

    <div id="tabAgenda" class="tab-content" style="display:none">
        <div class="topo">
            <div class="perfil">
                <div>
                    <h3>ğŸ“… Agenda & Notas</h3>
                    <div class="acoes-agenda">
                        <button onclick="baixarBackupAgenda()" title="Backup">ğŸ’¾</button>
                        <label for="inputBackupAgenda" title="Restaurar" style="cursor:pointer">ğŸ“‚</label>
                        <input type="file" id="inputBackupAgenda" style="display:none" onchange="restaurarBackupAgenda(this)">
                        <button onclick="gerarPDFAgenda()" title="PDF">ğŸ“„</button>
                    </div>
                </div>
            </div>
            <button onclick="logout()" class="btn-logout">Sair</button>
        </div>

        <div class="sub-nav">
            <button id="subTabCompromissos" class="sub-btn active" onclick="mudarSubAba('compromissos')">ğŸ“† Compromissos</button>
            <button id="subTabNotas" class="sub-btn" onclick="mudarSubAba('notas')">ğŸ“ AnotaÃ§Ãµes</button>
        </div>

        <div id="viewCompromissos" class="view-agenda">
            <div id="listaCompromissos" class="lista-agenda"></div>
            <button class="fab" onclick="abrirModalAgenda()">+</button>
        </div>

        <div id="viewNotas" class="view-agenda" style="display:none">
            <div id="listaNotas" class="lista-agenda"></div>
            <button class="fab" onclick="abrirModalNota()">+</button>
        </div>
    </div>

    <div class="bottom-nav nao-imprimir">
        <button class="nav-btn active" onclick="mudarAbaPrincipal('tabCaixinhas', this)">ğŸ“¦ Caixinhas</button>
        <button class="nav-btn" onclick="mudarAbaPrincipal('tabAgenda', this)">ğŸ“… Agenda</button>
    </div>

</div>

<div id="confete" class="confete"><div><h1>ğŸ† PARABÃ‰NS! ğŸ†</h1><p>Meta atingida!</p></div></div>

<div id="modalAgenda" class="modal-overlay" style="display:none">
    <div class="modal-card">
        <h3>Novo Compromisso</h3>
        <input id="agendaTitulo" placeholder="TÃ­tulo (ex: MÃ©dico)">
        <div style="display:flex; gap:10px">
            <input id="agendaData" type="date">
            <input id="agendaHora" type="time">
        </div>
        <div style="display:flex; gap:10px; margin-top:15px">
            <button onclick="fecharModais()" class="btn-cancelar">Cancelar</button>
            <button onclick="addAgenda()" class="btn-salvar">Agendar</button>
        </div>
    </div>
</div>

<div id="modalNota" class="modal-overlay" style="display:none">
    <div class="modal-card">
        <h3>Nova Nota</h3>
        <textarea id="notaTexto" rows="4" placeholder="Escreva aqui..." style="width:100%; border-radius:8px; padding:10px; background:#333; color:white; border:none"></textarea>
        <div style="display:flex; gap:10px; margin-top:15px">
            <button onclick="fecharModais()" class="btn-cancelar">Cancelar</button>
            <button onclick="addNota()" class="btn-salvar">Salvar</button>
        </div>
    </div>
</div>

<script src="app.js"></script>
</body>
</html>
